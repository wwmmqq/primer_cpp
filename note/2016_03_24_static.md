# static in c++

## 内存（物理内存和虚拟内存）
虚拟空间是CPU内部的寻址空间，位于MMU(存储器管理单元)之前。
物理空间是总线上的寻址空间，是经过MMU转换之后的空间。

## 程序内存分布（程序在内存中的分布指的就是程序在虚拟内存中的存储方式）

	从低地址到高地址，可分为下面几段： 
		预留内存地址（操作系统维护的内存地址，不可访问） 
		程序代码区（只读，存代码和一些其他的东西）； 
		data段（存初始化的全局变量和static变量，另外还有文字常量区，常量字符串就是放在这里，程序结束后有系统释放）； 
		bss段（存未初始化的 全局变量和static变量）； 
		堆（由低地址向高地址增长，一般new和malloc分配，由程序员分配释放）；
		共享库文件（调用的库文件，位于堆和栈之间）； 
		栈（由高地址向低地址增长，和堆的增长方式相对，对不同的OS来说，栈的初始大小有规定，可以修改，目前默认一般为2M，由编译器自动分配释放）； 
		再上面存的都是操作系统和内核调用的一些内存地址。

	简化版：
	
		代码区
		全局数据区
		堆
		栈


## 面向过程中的stati
1. 静态全局变量
	特点：
	a. 该变量在全局数据区分配内存；
	b. 未经初始化的静态全局变量会被程序自动初始化为0（自动变量的值是随机的，除非它被显式初始化）；
	c. 静态全局变量在声明它的整个文件都是可见的，而在文件之外是不可见的；
	好处：
	a. 静态全局变量不能被其它文件所用；
    b. 其它文件中可以定义相同名字的变量，不会发生冲突；

2. 静态局部变量
	特点：
	a. 该变量在全局数据区分配内存；
	b. 静态局部变量在程序执行到该对象的声明处时被首次初始化，即以后的函数调用不再进行初始化；
	c. 静态局部变量一般在声明处初始化，如果没有显式初始化，会被程序自动初始化为0；
	d. 它始终驻留在全局数据区，直到程序运行结束。但其作用域为局部作用域，当定义它的函数或语句块结束时，其作用域随之结束；



3. 静态函数
	在函数的返回类型前加上static关键字，函数即被定义为静态函数。静态函数与普通函数不同，它只能在声明它的文件当中可见，不能被其它文件使用。

	定义静态函数的好处：a. 静态函数不能被其它文件所用；b. 其它文件中可以定义相同名字的函数，不会发生冲突

## 面向对象中的static 

1. 静态数据成员
	特点：
	a. 于非静态数据成员，每个类对象都有自己的拷贝。而静态数据成员被当作是类的成员。无论这个类的对象被定义了多少个，静态数据成员在程序中也只有一份拷贝，由该类型的所有对象共享访问。也就是说，静态数据成员是该类的所有对象所共有的。对该类的多个对象来说，静态数据成员只分配一次内存，供所有对象共用。所以，静态数据成员的值对每个对象都是一样的，它的值可以更新；
	b. 静态数据成员存储在全局数据区。静态数据成员定义时要分配空间，所以不能在类声明中定义。eg. 语句int Myclass::Sum=0;是定义静态数据成员；
	c. 静态数据成员和普通数据成员一样遵从public,protected,private访问规则；
	d. 因为静态数据成员在全局数据区分配内存，属于本类的所有对象共享，所以，它不属于特定的类对象，在没有产生类对象时其作用域就可见，即在没有产生类的实例时，我们就可以操作它；
	e. 静态数据成员初始化与一般数据成员初始化不同。静态数据成员初始化的格式为：
	＜数据类型＞＜类名＞::＜静态数据成员名＞=＜值＞
	类的静态数据成员有两种访问形式：
	＜类对象名＞.＜静态数据成员名＞ 或 ＜类类型名＞::＜静态数据成员名＞
	f. 如果静态数据成员的访问权限允许的话（即public的成员），可在程序中，按上述格式来引用静态数据成员 ；
	
	eg.
	静态数据成员主要用在各个对象都有相同的某项属性的时候。比如对于一个存款类，每个实例的利息都是相同的。所以，应该把利息设为存款类的静态数据成员。
	第一，不管定义多少个存款类对象，利息数据成员都共享分h. 配在全局数据区的内存，所以节省存储空间。
	第二，一旦利息需要改变时，只要改变一次，则所有存款类对象的利息全改变过来了；

	同全局变量相比，使用静态数据成员有两个优势：
	a. 静态数据成员没有进入程序的全局名字空间，因此不存在与程序中其它全局名字冲突的可能性；
	b. 可以实现信息隐藏。静态数据成员可以是private成员，而全局变量不能；

2. 静态成员函数
	与静态数据成员一样，我们也可以创建一个静态成员函数，它为类的全部服务而不是为某一个类的具体对象服务。静态成员函数与静态数据成员一样，都是类的内部实现，属于类定义的一部分。普通的成员函数一般都隐含了一个this指针，this指针指向类的对象本身，因为普通成员函数总是具体的属于某个类的具体对象的。通常情况下，this是缺省的。如函数fn()实际上是this->fn()。但是与普通函数相比，静态成员函数由于不是与任何的对象相联系，因此它不具有this指针。从这个意义上讲，它无法访问属于类对象的非静态数据成员，也无法访问非静态成员函数，它只能调用其余的静态成员函数。

	
	特点：
	a. 出现在类体外的函数定义不能指定关键字static；
	b. 静态成员之间可以相互访问，包括静态成员函数访问静态数据成员和访问静态成员函数；
	c. 非静态成员函数可以任意地访问静态成员函数和静态数据成员；
	d. 静态成员函数不能访问非静态成员函数和非静态数据成员；
	e. 由于没有this指针的额外开销，因此静态成员函数与类的全局函数相比速度上会有少许的增长；
	f.调用静态成员函数，可以用成员访问操作符(.)和(->)为一个类的对象或指向类对象的指针调用静态成员函数，也可以直接使用如下格式：
	g.＜类名＞::＜静态成员函数名＞（＜参数表＞）调用类的静态成员函数。

